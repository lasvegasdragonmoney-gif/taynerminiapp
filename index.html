<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tayner Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #252547;
            --bg-card-hover: #2d2d5a;
            --accent-purple: #8b5cf6;
            --accent-purple-light: #a78bfa;
            --accent-purple-dark: #7c3aed;
            --accent-gold: #fbbf24;
            --accent-green: #34d399;
            --accent-blue: #60a5fa;
            --accent-red: #f87171;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --gradient-purple: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            --gradient-gold: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(ellipse at 20% 0%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
                var(--bg-primary);
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            gap: 10px;
            background: var(--bg-secondary);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .logo {
            width: 40px;
            height: 40px;
            border-radius: 10px;
        }

        .header-title {
            font-size: 22px;
            font-weight: 900;
            background: var(--gradient-purple);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Pages */
        .page {
            display: none;
            padding: 16px;
            min-height: calc(100vh - 140px);
        }

        .page.active {
            display: block;
        }

        /* Tab Bar */
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            padding-bottom: calc(8px + env(safe-area-inset-bottom));
            border-top: 1px solid rgba(255,255,255,0.05);
            z-index: 100;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.2s;
            min-width: 70px;
        }

        .tab-item.active {
            color: var(--accent-purple);
        }

        .tab-item.active .tab-icon {
            background: rgba(139, 92, 246, 0.2);
            transform: scale(1.1);
        }

        .tab-icon {
            font-size: 24px;
            padding: 6px;
            border-radius: 10px;
            transition: all 0.2s;
        }

        .tab-text {
            font-size: 10px;
            font-weight: 700;
        }

        /* ========== INFO PAGE ========== */
        .info-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .info-title {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-text {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 14px;
        }

        .info-text b {
            color: var(--text-primary);
        }

        .command-list {
            list-style: none;
        }

        .command-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            gap: 10px;
        }

        .command-list li:last-child {
            border-bottom: none;
        }

        .cmd {
            color: var(--accent-purple-light);
            font-weight: 700;
            min-width: 100px;
        }

        /* ========== COINS PAGE (Clicker) ========== */
        .clicker-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - 200px);
            text-align: center;
        }

        .clicker-balance {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .clicker-amount {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .coin-button {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: var(--gradient-gold);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            box-shadow: 
                0 10px 40px rgba(251, 191, 36, 0.4),
                inset 0 -5px 20px rgba(0,0,0,0.2),
                inset 0 5px 20px rgba(255,255,255,0.3);
            transition: transform 0.1s, box-shadow 0.1s;
            position: relative;
            overflow: hidden;
        }

        .coin-button:active {
            transform: scale(0.95);
            box-shadow: 
                0 5px 20px rgba(251, 191, 36, 0.3),
                inset 0 -3px 10px rgba(0,0,0,0.2),
                inset 0 3px 10px rgba(255,255,255,0.3);
        }

        .coin-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(255,255,255,0.3) 50%,
                transparent 70%
            );
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .clicker-progress {
            margin-top: 24px;
            width: 100%;
            max-width: 280px;
        }

        .progress-bar {
            height: 12px;
            background: var(--bg-card);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-purple);
            border-radius: 6px;
            transition: width 0.3s;
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .clicker-cooldown {
            margin-top: 20px;
            padding: 16px 24px;
            background: var(--bg-card);
            border-radius: 12px;
            color: var(--accent-red);
            font-weight: 700;
        }

        /* Float animation for +1 */
        .float-plus {
            position: fixed;
            font-size: 24px;
            font-weight: 900;
            color: var(--accent-gold);
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            z-index: 1000;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(1.5);
            }
        }

        /* ========== SHOP PAGE ========== */
        .shop-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 12px;
            margin-bottom: 16px;
            -webkit-overflow-scrolling: touch;
        }

        .shop-tabs::-webkit-scrollbar {
            display: none;
        }

        .shop-tab {
            background: var(--bg-card);
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .shop-tab.active {
            background: var(--gradient-purple);
            color: white;
        }

        .shop-content {
            display: none;
        }

        .shop-content.active {
            display: block;
        }

        .shop-item {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .shop-item:active {
            transform: scale(0.98);
            background: var(--bg-card-hover);
        }

        .shop-item-icon {
            font-size: 36px;
            min-width: 50px;
            text-align: center;
        }

        .shop-item-info {
            flex: 1;
        }

        .shop-item-name {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .shop-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .shop-item-price {
            font-size: 14px;
            font-weight: 800;
            color: var(--accent-gold);
            text-align: right;
        }

        .shop-item.legendary {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        /* ========== PROFILE PAGE ========== */
        .profile-header {
            background: var(--gradient-purple);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            margin: 0 auto 12px;
            border: 3px solid rgba(255,255,255,0.3);
        }

        .profile-name {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 4px;
        }

        .profile-level {
            font-size: 14px;
            opacity: 0.9;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .profile-stat {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
        }

        .profile-stat-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .profile-stat-value {
            font-size: 20px;
            font-weight: 800;
            color: var(--accent-purple-light);
        }

        .profile-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .profile-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .profile-section-title {
            font-size: 16px;
            font-weight: 800;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .profile-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .profile-item:last-child {
            border-bottom: none;
        }

        .profile-item-icon {
            font-size: 28px;
        }

        .profile-item-name {
            flex: 1;
            font-size: 14px;
        }

        .profile-item-value {
            font-size: 14px;
            color: var(--accent-purple-light);
            font-weight: 700;
        }

        .empty-state {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-card);
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .toast.show {
            opacity: 1;
        }

        .toast.success {
            border-left: 4px solid var(--accent-green);
        }

        .toast.error {
            border-left: 4px solid var(--accent-red);
        }

        /* Loading */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            gap: 16px;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid var(--bg-card);
            border-top-color: var(--accent-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Chat Button */
        .chat-btn {
            position: fixed;
            bottom: 90px;
            right: 16px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 136, 204, 0.4);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>

    <!-- Loading -->
    <div id="loading" class="loading">
        <div class="loader"></div>
        <div style="color: var(--text-secondary); font-weight: 600;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <!-- App -->
    <div id="app" style="display: none;">
        
        <!-- Header -->
        <div class="header">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD8UlEQVR4nO2ZW4hVVRjHf2tm1IZEk7TMSrNCI7WyF8lueDBKyMrKHqYHe7CHLkRFRUQPEYEP0UVKKgjKgi5WUGQXM7OsqShLK7uYZWVlF7uYZTbT/8s6e85Ze5+zz5wzzjlzBvaDzey91rfW/6zvtm6jqqpqqqqqqvqv6yGwPvBT4HngYODJwE5FtxwGHAucBtwGPJl3y9HARsATgfPz7jiUV8ANwO/AE/qb5i8CFue1fRnwCHBb0S1VHhG4FfgT+HNeW0/JuxU4E7gcWJl3z2PAusClRXdcDbweeH7Rg9YEzgCWFN1yL3AbsCbwfxYBf86r70bgGuDUojv+C5wDLM2753bgJuCCvPaOBa4Azi26pQL+Blal+yv7TwK+n9f2JcC/gFOAy4puWQrcAPwtr719gHOL7vg38BSwNu+uy4HLgTOL7rgWWAScm3fHlcBlQNE9/wEuzWvvCGBt4Pm8tp4PnJt3y8XA7Xn3XAIszGv7KOCqvFuqqqqqqqr+n3UAsBnwX2CYivcI4BHAB4CtgNcD/wCeyavveOBXwJN5t/wd+CXwz7z67gK8Dfgjr76/AMcAJwCLitq+CHgP8HTePU8ArgYuKLrlQuCavPv+CFwI/Dqv3suBl+fd80fgHODkonv+DPwpr727AL8HLsm77c/A74puuRh4W949/wqcnXfHX4H/yavvbuA3wAV5t/0V+FVeexcDvwSekXfPn4Hf5N2zAPgVcFFRe38AfpnXzj3Au4Hv59XzF+BXwPl5t/0p8HTg13n1/BG4CLgs7567gF8D/5dX35+Bi4Hz8u74G/C7vLb+BPwMeFlee/8FXJZ3x9+B0/Jq+yvws7y2/xf4Zd49fwTOyrvlb8Bv8tq5BPgjcG5ee/8CPCvvjr8Cp+XV8zfgJ8CFefX8Efhx3i1/Bn6ed8ufgHOK7vkz8NO8dr4M+AVwQV59fwQuybvlD8Bv8tr5C+DXwLl59fwRODfvjj8DPyq643fAD4te+ztwMvDbvDseCPw0r75LgF8AF+Td8RfguXn1/QE4Ja+dvwLOy7vn98CP8+6pdoC/By7Pu+cPwE/z2vkb4Fy8ti8E/gxcmnfP34Hf5NVzGfDfwLl59/we+GFee38HfJ93y++A7+e19zfAr4Hz8tr5E/D9vHb+F/hRXjt/A5xbdMdvge/n1fNH4Id59/wW+G5ee38BfAtcmFffb4Dv5t3xO+D7ee38CfhB3h2/BX6Y185fAN8GLsy777fAt/La+Svgu3n3/A74fl47fwZ8L++ePwA/yGvnb4Dz8u77PfCDvHb+DPhOXjt/BXw7754/AD/Ia+dvgPPy7vs98IO8e34LfCfvnj8Bv0u7ZVVVVVVVVY2ofwOLSvpPZxEDCQAAAABJRU5ErkJggg==" 
                 alt="Logo" class="logo">
            <span class="header-title">TAYNER</span>
        </div>

        <!-- ========== INFO PAGE ========== -->
        <div id="page-info" class="page active">
            <div class="info-section">
                <div class="info-title">üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</div>
                <div class="info-text">
                    <b>Tayner Bot</b> ‚Äî —ç—Ç–æ –±–æ—Ç —Å —ç–∫–æ–Ω–æ–º–∏–∫–æ–π, –º–∞—à–∏–Ω–∞–º–∏, –±–∏–∑–Ω–µ—Å–∞–º–∏ –∏ –º–Ω–æ–≥–∏–º –¥—Ä—É–≥–∏–º!
                    <br><br>
                    –ö–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –ø–æ—Å—Ç—ã –≤ –∫–∞–Ω–∞–ª–µ –∏ –ø–æ–ª—É—á–∞–π –º–æ–Ω–µ—Ç—ã. –ü—Ä–æ–∫–∞—á–∏–≤–∞–π –Ω–∞–≤—ã–∫–∏, –ø–æ–∫—É–ø–∞–π –º–∞—à–∏–Ω—ã –∏ –±–∏–∑–Ω–µ—Å—ã, –æ—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã!
                </div>
            </div>

            <div class="info-section">
                <div class="info-title">üí∞ –ö–∞–∫ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–Ω–µ—Ç—ã</div>
                <div class="info-text">
                    ‚Ä¢ <b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</b> ‚Äî –ø–∏—à–∏ –≤ —á–∞—Ç–µ –∏ –ø–æ–ª—É—á–∞–π –º–æ–Ω–µ—Ç—ã<br>
                    ‚Ä¢ <b>–†–µ–∞–∫—Ü–∏–∏</b> ‚Äî —Å—Ç–∞–≤—å —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–æ—Å—Ç—ã<br>
                    ‚Ä¢ <b>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</b> ‚Äî /daily –∫–∞–∂–¥—ã–π –¥–µ–Ω—å<br>
                    ‚Ä¢ <b>–ö–ª–∏–∫–µ—Ä</b> ‚Äî –∫–ª–∏–∫–∞–π –Ω–∞ –º–æ–Ω–µ—Ç—É –≤–æ –≤–∫–ª–∞–¥–∫–µ "–ú–æ–Ω–µ—Ç—ã"<br>
                    ‚Ä¢ <b>–†–∞–±–æ—Ç–∞</b> ‚Äî —É—Å—Ç—Ä–æ–π—Å—è –Ω–∞ —Ä–∞–±–æ—Ç—É /job<br>
                    ‚Ä¢ <b>–ë–∏–∑–Ω–µ—Å—ã</b> ‚Äî –ø–æ–∫—É–ø–∞–π –∏ —Å–æ–±–∏—Ä–∞–π –ø—Ä–∏–±—ã–ª—å<br>
                    ‚Ä¢ <b>–ì–æ–Ω–∫–∏</b> ‚Äî –ø–æ–±–µ–∂–¥–∞–π –≤ –≥–æ–Ω–∫–∞—Ö /race<br>
                    ‚Ä¢ <b>–†–µ—Ñ–µ—Ä–∞–ª—ã</b> ‚Äî –ø—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π
                </div>
            </div>

            <div class="info-section">
                <div class="info-title">üìù –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</div>
                <ul class="command-list">
                    <li><span class="cmd">/start</span> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</li>
                    <li><span class="cmd">/daily</span> –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</li>
                    <li><span class="cmd">/mycoins</span> –ú–æ–π –±–∞–ª–∞–Ω—Å</li>
                    <li><span class="cmd">/inventory</span> –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</li>
                    <li><span class="cmd">/shop</span> –ú–∞–≥–∞–∑–∏–Ω</li>
                    <li><span class="cmd">/cars</span> –ê–≤—Ç–æ—Å–∞–ª–æ–Ω</li>
                    <li><span class="cmd">/mycars</span> –ú–æ–∏ –º–∞—à–∏–Ω—ã</li>
                    <li><span class="cmd">/biz</span> –ë–∏–∑–Ω–µ—Å—ã</li>
                    <li><span class="cmd">/job</span> –†–∞–±–æ—Ç–∞</li>
                    <li><span class="cmd">/race</span> –ì–æ–Ω–∫–∏</li>
                    <li><span class="cmd">/cont</span> –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</li>
                    <li><span class="cmd">/donate</span> –î–æ–Ω–∞—Ç –º–µ–Ω—é</li>
                    <li><span class="cmd">/promo</span> –ü—Ä–æ–º–æ–∫–æ–¥—ã</li>
                    <li><span class="cmd">/withdraw</span> –í—ã–≤–æ–¥ BC</li>
                </ul>
            </div>

            <div class="info-section">
                <div class="info-title">üí¨ –ß–∞—Ç</div>
                <div class="info-text">
                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –Ω–∞—à–µ–º—É —á–∞—Ç—É –¥–ª—è –æ–±—â–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –º–æ–Ω–µ—Ç!
                    <br><br>
                    <a href="https://t.me/taynerchat" style="color: var(--accent-purple-light); text-decoration: none; font-weight: 700;">@taynerchat</a>
                </div>
            </div>
        </div>

        <!-- ========== COINS PAGE (Clicker) ========== -->
        <div id="page-coins" class="page">
            <div class="clicker-container">
                <div class="clicker-balance">–¢–≤–æ–π –±–∞–ª–∞–Ω—Å</div>
                <div class="clicker-amount">
                    <span>ü™ô</span>
                    <span id="clicker-coins">0</span>
                </div>

                <button class="coin-button" id="coin-btn" onclick="clickCoin(event)">
                    ü™ô
                </button>

                <div class="clicker-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="progress-text">
                        –ù–∞—Ñ–∞—Ä–º–ª–µ–Ω–æ: <span id="farmed-count">0</span> / 500
                    </div>
                </div>

                <div class="clicker-cooldown" id="cooldown-box" style="display: none;">
                    ‚è≥ –ü–æ–¥–æ–∂–¥–∏: <span id="cooldown-time">0:00</span>
                </div>
            </div>
        </div>

        <!-- ========== SHOP PAGE ========== -->
        <div id="page-shop" class="page">
            <div class="shop-tabs">
                <button class="shop-tab active" onclick="switchShopTab('cars')">üöó –ê–≤—Ç–æ</button>
                <button class="shop-tab" onclick="switchShopTab('biz')">üè¢ –ë–∏–∑–Ω–µ—Å—ã</button>
                <button class="shop-tab" onclick="switchShopTab('cases')">üé∞ –ö–µ–π—Å—ã</button>
                <button class="shop-tab" onclick="switchShopTab('containers')">üì¶ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</button>
                <button class="shop-tab" onclick="switchShopTab('vip')">‚≠ê VIP</button>
                <button class="shop-tab" onclick="switchShopTab('donate')">üíé –î–æ–Ω–∞—Ç</button>
            </div>

            <!-- Cars -->
            <div id="shop-cars" class="shop-content active">
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_car zaz_968')">
                    <div class="shop-item-icon">üöó</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ó–ê–ó-968</div>
                        <div class="shop-item-desc">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∑–∞–ø–æ—Ä–æ–∂–µ—Ü</div>
                    </div>
                    <div class="shop-item-price">10 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_car w210')">
                    <div class="shop-item-icon">üöô</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">Mercedes W210</div>
                        <div class="shop-item-desc">–ö–ª–∞—Å—Å–∏–∫–∞ –Ω–µ–º–µ—Ü–∫–æ–≥–æ –∞–≤—Ç–æ–ø—Ä–æ–º–∞</div>
                    </div>
                    <div class="shop-item-price">50 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_car m5_f90')">
                    <div class="shop-item-icon">üèéÔ∏è</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">BMW M5 F90</div>
                        <div class="shop-item-desc">–ú–æ—â—å –∏ —Å–∫–æ—Ä–æ—Å—Ç—å</div>
                    </div>
                    <div class="shop-item-price">500 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_car r8')">
                    <div class="shop-item-icon">üèéÔ∏è</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">Audi R8</div>
                        <div class="shop-item-desc">–°—É–ø–µ—Ä–∫–∞—Ä</div>
                    </div>
                    <div class="shop-item-price">1100 ü™ô</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_car cullinan')">
                    <div class="shop-item-icon">üöô</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">Rolls-Royce Cullinan</div>
                        <div class="shop-item-desc">–†–æ—Å–∫–æ—à—å –∏ –ø—Ä–µ—Å—Ç–∏–∂</div>
                    </div>
                    <div class="shop-item-price">3000 ü™ô</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_car veyron')">
                    <div class="shop-item-icon">üèéÔ∏è</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">Bugatti Veyron</div>
                        <div class="shop-item-desc">–õ–µ–≥–µ–Ω–¥–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏</div>
                    </div>
                    <div class="shop-item-price">8000 ü™ô</div>
                </div>
                <div style="text-align: center; padding: 20px; color: var(--text-secondary);">
                    –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: /cars –≤ –±–æ—Ç–µ
                </div>
            </div>

            <!-- Business -->
            <div id="shop-biz" class="shop-content">
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_biz arz_diner')">
                    <div class="shop-item-icon">üçî</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ó–∞–∫—É—Å–æ—á–Ω–∞—è –≤ –ê—Ä–∑–∞–º–∞—Å–µ</div>
                        <div class="shop-item-desc">–î–æ—Ö–æ–¥: 5-10 –º–æ–Ω–µ—Ç/–¥–µ–Ω—å</div>
                    </div>
                    <div class="shop-item-price">1000 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_biz arz_auto')">
                    <div class="shop-item-icon">üöó</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ê–≤—Ç–æ—Å–∞–ª–æ–Ω –≤ –ê—Ä–∑–∞–º–∞—Å–µ</div>
                        <div class="shop-item-desc">–î–æ—Ö–æ–¥: 200 –º–æ–Ω–µ—Ç/–¥–µ–Ω—å</div>
                    </div>
                    <div class="shop-item-price">15000 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_biz arz_247')">
                    <div class="shop-item-icon">üè™</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">24/7 –≤ –ê—Ä–∑–∞–º–∞—Å–µ</div>
                        <div class="shop-item-desc">–î–æ—Ö–æ–¥: 200 –º–æ–Ω–µ—Ç/–¥–µ–Ω—å</div>
                    </div>
                    <div class="shop-item-price">20000 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_biz arz_gas')">
                    <div class="shop-item-icon">‚õΩ</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ê–ó–° –≤ –ê—Ä–∑–∞–º–∞—Å–µ</div>
                        <div class="shop-item-desc">–î–æ—Ö–æ–¥: 250 –º–æ–Ω–µ—Ç/–¥–µ–Ω—å</div>
                    </div>
                    <div class="shop-item-price">25000 ü™ô</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /buy_biz tech_center')">
                    <div class="shop-item-icon">üîß</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä</div>
                        <div class="shop-item-desc">+5% –æ—Ç —Ç—é–Ω–∏–Ω–≥–∞ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤</div>
                    </div>
                    <div class="shop-item-price">40000 ü™ô</div>
                </div>
                <div style="text-align: center; padding: 20px; color: var(--text-secondary);">
                    –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: /biz –≤ –±–æ—Ç–µ
                </div>
            </div>

            <!-- Cases -->
            <div id="shop-cases" class="shop-content">
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üì¶</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ö–µ–π—Å –±–æ–º–∂–∞</div>
                        <div class="shop-item-desc">–ú–æ–Ω–µ—Ç—ã, BC –∏–ª–∏ –∞–≤—Ç–æ</div>
                    </div>
                    <div class="shop-item-price">100 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üì¶</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–µ–π—Å</div>
                        <div class="shop-item-desc">–®–∞–Ω—Å –Ω–∞ Rolls-Royce (5%)</div>
                    </div>
                    <div class="shop-item-price">500 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üöó</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ê–≤—Ç–æ-–∫–µ–π—Å</div>
                        <div class="shop-item-desc">–¢–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏!</div>
                    </div>
                    <div class="shop-item-price">1000 ü™ô</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üéÑ</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∫–µ–π—Å</div>
                        <div class="shop-item-desc">–†–µ–¥–∫–∏–π: –ì–ê–ó-69 (4%)</div>
                    </div>
                    <div class="shop-item-price">1500 ü™ô</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üíé</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–û—Å–æ–±—ã–π –∫–µ–π—Å</div>
                        <div class="shop-item-desc">–¢–æ–ª—å–∫–æ —Ç–æ–ø-–∞–≤—Ç–æ!</div>
                    </div>
                    <div class="shop-item-price">500 üíé</div>
                </div>
            </div>

            <!-- Containers -->
            <div id="shop-containers" class="shop-content">
                <div class="shop-item" onclick="showToast('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é')">
                    <div class="shop-item-icon">üá∑üá∫</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –†–æ—Å—Å–∏—è</div>
                        <div class="shop-item-desc">–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞: 25 –º–æ–Ω–µ—Ç</div>
                    </div>
                    <div class="shop-item-price">–ê—É–∫—Ü–∏–æ–Ω</div>
                </div>
                <div class="shop-item" onclick="showToast('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é')">
                    <div class="shop-item-icon">üá©üá™</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ì–µ—Ä–º–∞–Ω–∏—è</div>
                        <div class="shop-item-desc">–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞: 200 –º–æ–Ω–µ—Ç</div>
                    </div>
                    <div class="shop-item-price">–ê—É–∫—Ü–∏–æ–Ω</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é')">
                    <div class="shop-item-icon">üá¶üá™</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –î—É–±–∞–π</div>
                        <div class="shop-item-desc">–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞: 1000 –º–æ–Ω–µ—Ç</div>
                    </div>
                    <div class="shop-item-price">–ê—É–∫—Ü–∏–æ–Ω</div>
                </div>
                <div style="padding: 20px; color: var(--text-secondary); text-align: center;">
                    –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ 12:00, 15:00, 17:00, 20:00 –ú–°–ö<br>
                    –°–ª–µ–¥–∏—Ç–µ –∑–∞ —á–∞—Ç–æ–º @taynerchat
                </div>
            </div>

            <!-- VIP -->
            <div id="shop-vip" class="shop-content">
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">ü•à</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">VIP Silver</div>
                        <div class="shop-item-desc">+2% –∫ —Ä–∞–±–æ—Ç–µ, -2 —Å–µ–∫ –ö–î</div>
                    </div>
                    <div class="shop-item-price">300 ü™ô</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">ü•á</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">VIP Gold</div>
                        <div class="shop-item-desc">+4% –ø—Ä–∏–±—ã–ª–∏, +1 BC/—á–∞—Å</div>
                    </div>
                    <div class="shop-item-price">2000 ü™ô</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üíé</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">VIP Platinum</div>
                        <div class="shop-item-desc">+10% –ø—Ä–∏–±—ã–ª–∏, +2 BC/—á–∞—Å</div>
                    </div>
                    <div class="shop-item-price">3000 ü™ô / 300 ‚≠ê</div>
                </div>
            </div>

            <!-- Donate -->
            <div id="shop-donate" class="shop-content">
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">ü™ô</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">100 –º–æ–Ω–µ—Ç</div>
                        <div class="shop-item-desc">–ü–æ–ø–æ–ª–Ω–∏ –±–∞–ª–∞–Ω—Å</div>
                    </div>
                    <div class="shop-item-price">10 ‚≠ê</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">‚ö°</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ë—É—Å—Ç–µ—Ä x2 –º–æ–Ω–µ—Ç—ã</div>
                        <div class="shop-item-desc">24 —á–∞—Å–∞ –¥–≤–æ–π–Ω—ã—Ö –º–æ–Ω–µ—Ç</div>
                    </div>
                    <div class="shop-item-price">125 ‚≠ê</div>
                </div>
                <div class="shop-item" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üöó</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–ê–≤—Ç–æ-–∫–µ–π—Å</div>
                        <div class="shop-item-desc">–¢–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</div>
                    </div>
                    <div class="shop-item-price">100 ‚≠ê</div>
                </div>
                <div class="shop-item legendary" onclick="showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ')">
                    <div class="shop-item-icon">üéÅ</div>
                    <div class="shop-item-info">
                        <div class="shop-item-name">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</div>
                        <div class="shop-item-desc">50% —à–∞–Ω—Å –Ω–∞ —Ç–æ–ø-–∞–≤—Ç–æ</div>
                    </div>
                    <div class="shop-item-price">250 ‚≠ê</div>
                </div>
                <div style="padding: 20px; color: var(--text-secondary); text-align: center;">
                    –î–ª—è –ø–æ–∫—É–ø–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /donate –≤ –±–æ—Ç–µ
                </div>
            </div>
        </div>

        <!-- ========== PROFILE PAGE ========== -->
        <div id="page-profile" class="page">
            <div class="profile-header">
                <div class="profile-avatar" id="profile-avatar">üë§</div>
                <div class="profile-name" id="profile-name">–ò–≥—Ä–æ–∫</div>
                <div class="profile-level">–£—Ä–æ–≤–µ–Ω—å <span id="profile-level">1</span></div>
            </div>

            <div class="profile-stats">
                <div class="profile-stat">
                    <div class="profile-stat-icon">ü™ô</div>
                    <div class="profile-stat-value" id="profile-coins">0</div>
                    <div class="profile-stat-label">–ú–æ–Ω–µ—Ç—ã</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-icon">‚¨õ</div>
                    <div class="profile-stat-value" id="profile-black">0</div>
                    <div class="profile-stat-label">Black Coin</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-icon">üé´</div>
                    <div class="profile-stat-value" id="profile-tickets">0</div>
                    <div class="profile-stat-label">–ë–∏–ª–µ—Ç—ã</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-icon">üíé</div>
                    <div class="profile-stat-value" id="profile-crystals">0</div>
                    <div class="profile-stat-label">–ö—Ä–∏—Å—Ç–∞–ª–ª—ã</div>
                </div>
            </div>

            <div class="profile-section">
                <div class="profile-section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="profile-item">
                    <div class="profile-item-icon">‚è±Ô∏è</div>
                    <div class="profile-item-name">–í—Ä–µ–º—è –≤ –±–æ—Ç–µ</div>
                    <div class="profile-item-value" id="profile-time">‚Äî</div>
                </div>
                <div class="profile-item">
                    <div class="profile-item-icon">‚≠ê</div>
                    <div class="profile-item-name">–ó–∞–¥–æ–Ω–∞—á–µ–Ω–æ –∑–≤—ë–∑–¥</div>
                    <div class="profile-item-value" id="profile-donated">0</div>
                </div>
                <div class="profile-item">
                    <div class="profile-item-icon">üë•</div>
                    <div class="profile-item-name">–†–µ—Ñ–µ—Ä–∞–ª–æ–≤</div>
                    <div class="profile-item-value" id="profile-refs">0</div>
                </div>
            </div>

            <div class="profile-section">
                <div class="profile-section-title">üöó –ú–æ–∏ –∞–≤—Ç–æ (<span id="cars-count">0</span>)</div>
                <div id="profile-cars">
                    <div class="empty-state">
                        <div class="empty-icon">üöó</div>
                        <div>–ù–µ—Ç –º–∞—à–∏–Ω</div>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <div class="profile-section-title">üè¢ –ú–æ–∏ –±–∏–∑–Ω–µ—Å—ã (<span id="biz-count">0</span>)</div>
                <div id="profile-biz">
                    <div class="empty-state">
                        <div class="empty-icon">üè¢</div>
                        <div>–ù–µ—Ç –±–∏–∑–Ω–µ—Å–æ–≤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Bar -->
        <div class="tab-bar">
            <button class="tab-item active" onclick="switchTab('info')">
                <span class="tab-icon">‚ÑπÔ∏è</span>
                <span class="tab-text">–ò–Ω—Ñ–æ</span>
            </button>
            <button class="tab-item" onclick="switchTab('coins')">
                <span class="tab-icon">ü™ô</span>
                <span class="tab-text">–ú–æ–Ω–µ—Ç—ã</span>
            </button>
            <button class="tab-item" onclick="switchTab('shop')">
                <span class="tab-icon">üõí</span>
                <span class="tab-text">–ú–∞–≥–∞–∑–∏–Ω</span>
            </button>
            <button class="tab-item" onclick="switchTab('profile')">
                <span class="tab-icon">üë§</span>
                <span class="tab-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
        </div>

        <!-- Chat Button -->
        <button class="chat-btn" onclick="openChat()">üí¨</button>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // API URL - –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–®
        const API_URL = 'https://c70daf636b8e58.lhr.life';

        // User
        const user = tg.initDataUnsafe?.user;
        const userId = user?.id;
        let userData = null;

        // Clicker state
        const CLICK_LIMIT = 500;
        const COOLDOWN_MINUTES = 500;
        let clickCount = 0;
        let cooldownEnd = 0;
        let cooldownInterval = null;

        // Cars data
        const CARS = {
            "zaz_968": { name: "–ó–ê–ó-968", emoji: "üöó" },
            "oka": { name: "–û–ö–ê", emoji: "üöó" },
            "w210": { name: "Mercedes W210", emoji: "üöô" },
            "m5_f90": { name: "BMW M5 F90", emoji: "üèéÔ∏è" },
            "r8": { name: "Audi R8", emoji: "üèéÔ∏è" },
            "cullinan": { name: "Rolls-Royce Cullinan", emoji: "üöô" },
            "veyron": { name: "Bugatti Veyron", emoji: "üèéÔ∏è" },
            "divo": { name: "Bugatti Divo", emoji: "üèéÔ∏è" },
            "gaz_69": { name: "–ì–ê–ó-69", emoji: "üöô" },
        };

        // Format number
        function formatNum(n) {
            return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }

        // Toast
        function showToast(msg, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = 'toast show ' + type;
            setTimeout(() => toast.className = 'toast', 3000);
        }

        // Switch tab
        function switchTab(tab) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            
            document.getElementById(`page-${tab}`).classList.add('active');
            event.currentTarget.classList.add('active');

            if (tab === 'profile') loadProfile();
            if (tab === 'coins') loadClicker();
        }

        // Switch shop tab
        function switchShopTab(tab) {
            document.querySelectorAll('.shop-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.shop-tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(`shop-${tab}`).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // Load data
        async function loadData() {
            if (!userId) {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('app').style.display = 'block';
                return;
            }

            try {
                const res = await fetch(`${API_URL}/user/${userId}`);
                if (res.ok) {
                    userData = await res.json();
                }
            } catch (e) {
                console.error('API Error:', e);
            }

            // Load clicker state from localStorage
            loadClickerState();

            document.getElementById('loading').style.display = 'none';
            document.getElementById('app').style.display = 'block';
        }

        // Load profile
        function loadProfile() {
            if (!userData) return;

            document.getElementById('profile-name').textContent = user?.first_name || '–ò–≥—Ä–æ–∫';
            document.getElementById('profile-avatar').textContent = (user?.first_name || '–ò')[0];
            document.getElementById('profile-level').textContent = userData.user?.level || 1;
            document.getElementById('profile-coins').textContent = formatNum(userData.balance?.coins || 0);
            document.getElementById('profile-black').textContent = formatNum(userData.balance?.black || 0);
            document.getElementById('profile-tickets').textContent = userData.balance?.tickets || 0;
            document.getElementById('profile-crystals').textContent = userData.balance?.crystals || 0;
            document.getElementById('profile-refs').textContent = userData.referrals?.count || 0;

            // Cars
            const carsContainer = document.getElementById('profile-cars');
            const cars = userData.cars || [];
            document.getElementById('cars-count').textContent = cars.length;

            if (cars.length === 0) {
                carsContainer.innerHTML = '<div class="empty-state"><div class="empty-icon">üöó</div><div>–ù–µ—Ç –º–∞—à–∏–Ω</div></div>';
            } else {
                carsContainer.innerHTML = cars.map(c => {
                    const info = CARS[c.id] || { name: c.id, emoji: 'üöó' };
                    return `<div class="profile-item">
                        <div class="profile-item-icon">${info.emoji}</div>
                        <div class="profile-item-name">${info.name}</div>
                        ${c.count > 1 ? `<div class="profile-item-value">√ó${c.count}</div>` : ''}
                    </div>`;
                }).join('');
            }

            // Business
            const bizContainer = document.getElementById('profile-biz');
            const biz = userData.businesses || [];
            document.getElementById('biz-count').textContent = biz.length;

            if (biz.length === 0) {
                bizContainer.innerHTML = '<div class="empty-state"><div class="empty-icon">üè¢</div><div>–ù–µ—Ç –±–∏–∑–Ω–µ—Å–æ–≤</div></div>';
            } else {
                bizContainer.innerHTML = biz.map(b => `<div class="profile-item">
                    <div class="profile-item-icon">üè¢</div>
                    <div class="profile-item-name">${b}</div>
                </div>`).join('');
            }
        }

        // ========== CLICKER ==========
        
        function loadClickerState() {
            const saved = localStorage.getItem(`clicker_${userId}`);
            if (saved) {
                const state = JSON.parse(saved);
                clickCount = state.clicks || 0;
                cooldownEnd = state.cooldownEnd || 0;
            }
            updateClickerUI();
        }

        function saveClickerState() {
            localStorage.setItem(`clicker_${userId}`, JSON.stringify({
                clicks: clickCount,
                cooldownEnd: cooldownEnd
            }));
        }

        function loadClicker() {
            updateClickerUI();
            startCooldownTimer();
        }

        function updateClickerUI() {
            const coins = (userData?.balance?.coins || 0) + clickCount;
            document.getElementById('clicker-coins').textContent = formatNum(coins);
            document.getElementById('farmed-count').textContent = clickCount;
            document.getElementById('progress-fill').style.width = `${(clickCount / CLICK_LIMIT) * 100}%`;

            const now = Date.now();
            if (cooldownEnd > now) {
                document.getElementById('cooldown-box').style.display = 'block';
                document.getElementById('coin-btn').style.opacity = '0.5';
                document.getElementById('coin-btn').style.pointerEvents = 'none';
            } else {
                document.getElementById('cooldown-box').style.display = 'none';
                document.getElementById('coin-btn').style.opacity = '1';
                document.getElementById('coin-btn').style.pointerEvents = 'auto';
            }
        }

        function startCooldownTimer() {
            if (cooldownInterval) clearInterval(cooldownInterval);
            
            cooldownInterval = setInterval(() => {
                const now = Date.now();
                if (cooldownEnd > now) {
                    const remaining = Math.ceil((cooldownEnd - now) / 1000);
                    const hours = Math.floor(remaining / 3600);
                    const minutes = Math.floor((remaining % 3600) / 60);
                    const seconds = remaining % 60;
                    document.getElementById('cooldown-time').textContent = 
                        `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                } else {
                    document.getElementById('cooldown-box').style.display = 'none';
                    document.getElementById('coin-btn').style.opacity = '1';
                    document.getElementById('coin-btn').style.pointerEvents = 'auto';
                    
                    // Reset clicks after cooldown
                    if (clickCount >= CLICK_LIMIT) {
                        clickCount = 0;
                        saveClickerState();
                        updateClickerUI();
                    }
                }
            }, 1000);
        }

        function clickCoin(event) {
            const now = Date.now();
            
            if (cooldownEnd > now) {
                showToast('–ü–æ–¥–æ–∂–¥–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫—É–ª–¥–∞—É–Ω–∞!', 'error');
                return;
            }

            if (clickCount >= CLICK_LIMIT) {
                cooldownEnd = now + (COOLDOWN_MINUTES * 60 * 1000);
                saveClickerState();
                updateClickerUI();
                showToast('–õ–∏–º–∏—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç! –ü–æ–¥–æ–∂–¥–∏ ' + COOLDOWN_MINUTES + ' –º–∏–Ω—É—Ç', 'error');
                return;
            }

            clickCount++;
            saveClickerState();
            updateClickerUI();

            // Create float +1
            const plus = document.createElement('div');
            plus.className = 'float-plus';
            plus.textContent = '+1';
            plus.style.left = (event.clientX - 15) + 'px';
            plus.style.top = (event.clientY - 20) + 'px';
            document.body.appendChild(plus);
            setTimeout(() => plus.remove(), 1000);

            // Vibration
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }

            // Send to API periodically (every 10 clicks)
            if (clickCount % 10 === 0) {
                syncClicks();
            }
        }

        async function syncClicks() {
            if (!userId || clickCount === 0) return;
            
            try {
                await fetch(`${API_URL}/clicker/${userId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ clicks: clickCount })
                });
            } catch (e) {
                console.error('Sync error:', e);
            }
        }

        // Open chat
        function openChat() {
            tg.openTelegramLink('https://t.me/taynerchat');
        }

        // Init
        document.addEventListener('DOMContentLoaded', loadData);
        
        // Sync clicks before closing
        window.addEventListener('beforeunload', syncClicks);
    </script>
</body>
</html>
