<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tayner Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #252547;
            --bg-card-hover: #2d2d5a;
            --accent-purple: #8b5cf6;
            --accent-purple-light: #a78bfa;
            --accent-purple-dark: #7c3aed;
            --accent-gold: #fbbf24;
            --accent-green: #34d399;
            --accent-blue: #60a5fa;
            --accent-red: #f87171;
            --accent-pink: #f472b6;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --gradient-purple: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            --gradient-gold: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 100px;
        }

        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(ellipse at 20% 0%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
                var(--bg-primary);
        }

        .container {
            max-width: 100%;
            padding: 16px;
        }

        /* Header with Logo */
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
            gap: 12px;
        }

        .logo {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);
        }

        .header-title {
            font-size: 28px;
            font-weight: 900;
            background: var(--gradient-purple);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Balance Card */
        .balance-card {
            background: var(--gradient-purple);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .balance-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 4px;
        }

        .balance-value {
            font-size: 42px;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .balance-icon {
            font-size: 32px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 14px 10px;
            text-align: center;
        }

        .stat-icon {
            font-size: 22px;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 800;
            color: var(--accent-purple-light);
        }

        .stat-label {
            font-size: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Section */
        .section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
        }

        /* Button Grid */
        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .button-grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .action-btn {
            background: var(--bg-card);
            border: none;
            border-radius: 16px;
            padding: 16px 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-primary);
        }

        .action-btn:active {
            transform: scale(0.96);
            background: var(--bg-card-hover);
        }

        .action-btn-icon {
            font-size: 28px;
        }

        .action-btn-text {
            font-size: 12px;
            font-weight: 700;
            text-align: center;
        }

        .action-btn.primary {
            background: var(--gradient-purple);
        }

        .action-btn.gold {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #1a1a2e;
        }

        .action-btn.green {
            background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
        }

        .action-btn.red {
            background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
        }

        /* Full Width Button */
        .full-btn {
            width: 100%;
            background: var(--bg-card);
            border: none;
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .full-btn:active {
            transform: scale(0.98);
            background: var(--bg-card-hover);
        }

        .full-btn-icon {
            font-size: 28px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 12px;
        }

        .full-btn-content {
            flex: 1;
            text-align: left;
        }

        .full-btn-title {
            font-size: 15px;
            font-weight: 700;
        }

        .full-btn-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .full-btn-arrow {
            font-size: 20px;
            color: var(--text-secondary);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: flex-end;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: 24px 24px 0 0;
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 24px;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 800;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-card);
            border: none;
            color: var(--text-primary);
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .modal-item {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-item-icon {
            font-size: 32px;
        }

        .modal-item-info {
            flex: 1;
        }

        .modal-item-name {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .modal-item-price {
            font-size: 14px;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .modal-btn {
            width: 100%;
            padding: 16px;
            border-radius: 16px;
            border: none;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 16px;
        }

        .modal-btn.primary {
            background: var(--gradient-purple);
            color: white;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-card);
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .toast.show {
            opacity: 1;
        }

        .toast.success {
            border-left: 4px solid var(--accent-green);
        }

        .toast.error {
            border-left: 4px solid var(--accent-red);
        }

        /* Loading */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            gap: 16px;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid var(--bg-card);
            border-top-color: var(--accent-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Inventory Item */
        .inv-item {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .inv-item-icon {
            font-size: 36px;
        }

        .inv-item-info {
            flex: 1;
        }

        .inv-item-name {
            font-size: 14px;
            font-weight: 700;
        }

        .inv-item-count {
            font-size: 12px;
            color: var(--accent-purple-light);
        }

        /* Car Card */
        .car-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .car-card.legendary {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .car-emoji {
            font-size: 36px;
        }

        .car-info {
            flex: 1;
        }

        .car-name {
            font-size: 14px;
            font-weight: 700;
        }

        .car-price {
            font-size: 12px;
            color: var(--accent-green);
        }

        .car-count {
            background: var(--accent-purple);
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
        }

        /* Promo Input */
        .promo-input {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: 2px solid var(--bg-card);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 16px;
            font-family: inherit;
            margin-bottom: 12px;
        }

        .promo-input:focus {
            outline: none;
            border-color: var(--accent-purple);
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            padding: 12px 16px;
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
            display: flex;
            justify-content: space-around;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 12px;
            transition: all 0.2s;
        }

        .nav-item.active {
            color: var(--accent-purple);
            background: rgba(139, 92, 246, 0.1);
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-text {
            font-size: 10px;
            font-weight: 700;
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Referral */
        .ref-link {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 14px;
            font-size: 12px;
            word-break: break-all;
            color: var(--accent-purple-light);
            margin-bottom: 12px;
        }

        .copy-btn {
            width: 100%;
            padding: 14px;
            background: var(--gradient-purple);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>
    
    <!-- Loading -->
    <div id="loading" class="loading">
        <div class="loader"></div>
        <div style="color: var(--text-secondary); font-weight: 600;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <!-- Main App -->
    <div id="app" style="display: none;">
        <div class="container">
            <!-- Header -->
            <div class="header">
                <img src="data:image/png;base64,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" 
                     alt="Tayner Bot" class="logo">
                <span class="header-title">TAYNER</span>
            </div>

            <!-- Pages -->
            
            <!-- Main Page -->
            <div id="page-main" class="page active">
                <!-- Balance Card -->
                <div class="balance-card">
                    <div class="balance-label">–ú–æ–π –±–∞–ª–∞–Ω—Å</div>
                    <div class="balance-value">
                        <span class="balance-icon">ü™ô</span>
                        <span id="coins-display">0</span>
                    </div>
                </div>

                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-icon">‚¨õ</div>
                        <div class="stat-value" id="black-display">0</div>
                        <div class="stat-label">Black</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üé´</div>
                        <div class="stat-value" id="tickets-display">0</div>
                        <div class="stat-label">–ë–∏–ª–µ—Ç—ã</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-value" id="level-display">1</div>
                        <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                    </div>
                </div>

                <!-- Daily Button -->
                <button class="full-btn" onclick="claimDaily()" id="daily-btn">
                    <div class="full-btn-icon">üéÅ</div>
                    <div class="full-btn-content">
                        <div class="full-btn-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</div>
                        <div class="full-btn-subtitle">–ó–∞–±–µ—Ä–∏ –Ω–∞–≥—Ä–∞–¥—É!</div>
                    </div>
                    <div class="full-btn-arrow">‚Ä∫</div>
                </button>

                <!-- Interactions Section -->
                <div class="section">
                    <div class="section-title">üéÆ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è</div>
                    <div class="button-grid">
                        <button class="action-btn" onclick="showModal('inventory')">
                            <span class="action-btn-icon">üéí</span>
                            <span class="action-btn-text">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
                        </button>
                        <button class="action-btn" onclick="showModal('shop')">
                            <span class="action-btn-icon">üõí</span>
                            <span class="action-btn-text">–ú–∞–≥–∞–∑–∏–Ω</span>
                        </button>
                        <button class="action-btn" onclick="showModal('cars')">
                            <span class="action-btn-icon">üöó</span>
                            <span class="action-btn-text">–ê–≤—Ç–æ—Å–∞–ª–æ–Ω</span>
                        </button>
                        <button class="action-btn" onclick="showModal('business')">
                            <span class="action-btn-icon">üè¢</span>
                            <span class="action-btn-text">–ë–∏–∑–Ω–µ—Å—ã</span>
                        </button>
                        <button class="action-btn" onclick="showModal('containers')">
                            <span class="action-btn-icon">üì¶</span>
                            <span class="action-btn-text">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</span>
                        </button>
                        <button class="action-btn" onclick="showModal('cases')">
                            <span class="action-btn-icon">üé∞</span>
                            <span class="action-btn-text">–ö–µ–π—Å—ã</span>
                        </button>
                    </div>
                </div>

                <!-- Earn Section -->
                <div class="section">
                    <div class="section-title">üí∞ –ó–∞—Ä–∞–±–æ—Ç–∞–π –º–æ–Ω–µ—Ç—ã</div>
                    <button class="full-btn" onclick="showModal('referral')">
                        <div class="full-btn-icon">üë•</div>
                        <div class="full-btn-content">
                            <div class="full-btn-title">–†–µ—Ñ–µ—Ä–∞–ª—ã</div>
                            <div class="full-btn-subtitle">–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π –±–æ–Ω—É—Å—ã</div>
                        </div>
                        <div class="full-btn-arrow">‚Ä∫</div>
                    </button>
                    <button class="full-btn" onclick="showModal('promo')">
                        <div class="full-btn-icon">üéüÔ∏è</div>
                        <div class="full-btn-content">
                            <div class="full-btn-title">–ü—Ä–æ–º–æ–∫–æ–¥</div>
                            <div class="full-btn-subtitle">–í–≤–µ–¥–∏ –ø—Ä–æ–º–æ–∫–æ–¥ –∏ –ø–æ–ª—É—á–∏ –Ω–∞–≥—Ä–∞–¥—É</div>
                        </div>
                        <div class="full-btn-arrow">‚Ä∫</div>
                    </button>
                </div>

                <!-- Support Section -->
                <div class="section">
                    <div class="section-title">‚≠ê –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</div>
                    <button class="full-btn" onclick="showModal('donate')">
                        <div class="full-btn-icon" style="background: rgba(251, 191, 36, 0.2);">üí´</div>
                        <div class="full-btn-content">
                            <div class="full-btn-title">–ú–∞–≥–∞–∑–∏–Ω –∑–∞ –∑–≤—ë–∑–¥—ã</div>
                            <div class="full-btn-subtitle">–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∑–∞ Telegram Stars</div>
                        </div>
                        <div class="full-btn-arrow">‚Ä∫</div>
                    </button>
                </div>

                <!-- Withdraw Section -->
                <div class="section">
                    <button class="full-btn" onclick="showModal('withdraw')" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(99, 102, 241, 0.3) 100%);">
                        <div class="full-btn-icon" style="background: rgba(139, 92, 246, 0.3);">üí∏</div>
                        <div class="full-btn-content">
                            <div class="full-btn-title">–í—ã–≤–æ–¥ BLACK COIN</div>
                            <div class="full-btn-subtitle" id="black-balance-text">–î–æ—Å—Ç—É–ø–Ω–æ: 0 BC</div>
                        </div>
                        <div class="full-btn-arrow">‚Ä∫</div>
                    </button>
                </div>

                <!-- Chat Button -->
                <button class="full-btn" onclick="openChat()" style="background: linear-gradient(135deg, #0088cc 0%, #005f99 100%);">
                    <div class="full-btn-icon" style="background: rgba(255,255,255,0.2);">üí¨</div>
                    <div class="full-btn-content">
                        <div class="full-btn-title">–ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç</div>
                        <div class="full-btn-subtitle">@taynerchat</div>
                    </div>
                    <div class="full-btn-arrow">‚Ä∫</div>
                </button>
            </div>

        </div>
    </div>

    <!-- Modals -->
    
    <!-- Inventory Modal -->
    <div class="modal-overlay" id="modal-inventory" onclick="closeModal(event, 'inventory')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
                <button class="modal-close" onclick="closeModal(null, 'inventory')">√ó</button>
            </div>
            <div id="inventory-content">
                <div class="empty-state">
                    <div class="empty-icon">üì¶</div>
                    <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shop Modal -->
    <div class="modal-overlay" id="modal-shop" onclick="closeModal(event, 'shop')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
                <button class="modal-close" onclick="closeModal(null, 'shop')">√ó</button>
            </div>
            <div id="shop-content">
                <div class="modal-item" onclick="buyItem('ticket')">
                    <div class="modal-item-icon">üé´</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–ë–∏–ª–µ—Ç –±–æ—Å—Å–∞</div>
                        <div class="modal-item-desc">–î–ª—è –∞—Ç–∞–∫–∏ –±–æ—Å—Å–∞</div>
                    </div>
                    <div class="modal-item-price">50 ü™ô</div>
                </div>
                <div class="modal-item" onclick="buyItem('strength')">
                    <div class="modal-item-icon">üí™</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–£–ª—É—á—à–∏—Ç—å —Å–∏–ª—É</div>
                        <div class="modal-item-desc">+1 –∫ —É—Ä–æ–Ω—É</div>
                    </div>
                    <div class="modal-item-price">1000 ü™ô</div>
                </div>
                <div class="modal-item" onclick="buyItem('luck')">
                    <div class="modal-item-icon">üçÄ</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–£–ª—É—á—à–∏—Ç—å —É–¥–∞—á—É</div>
                        <div class="modal-item-desc">+1 –∫ —à–∞–Ω—Å—É –∫—Ä–∏—Ç–∞</div>
                    </div>
                    <div class="modal-item-price">1000 ü™ô</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cars Modal -->
    <div class="modal-overlay" id="modal-cars" onclick="closeModal(event, 'cars')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üöó –ú–æ–∏ –∞–≤—Ç–æ</div>
                <button class="modal-close" onclick="closeModal(null, 'cars')">√ó</button>
            </div>
            <div id="cars-content">
                <div class="empty-state">
                    <div class="empty-icon">üöó</div>
                    <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Business Modal -->
    <div class="modal-overlay" id="modal-business" onclick="closeModal(event, 'business')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üè¢ –ë–∏–∑–Ω–µ—Å—ã</div>
                <button class="modal-close" onclick="closeModal(null, 'business')">√ó</button>
            </div>
            <div id="business-content">
                <div class="empty-state">
                    <div class="empty-icon">üè¢</div>
                    <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Containers Modal -->
    <div class="modal-overlay" id="modal-containers" onclick="closeModal(event, 'containers')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üì¶ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</div>
                <button class="modal-close" onclick="closeModal(null, 'containers')">√ó</button>
            </div>
            <div class="modal-content">
                <p style="margin-bottom: 16px;">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –≤ —á–∞—Ç–µ. –£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –∞—É–∫—Ü–∏–æ–Ω–∞—Ö!</p>
                <button class="modal-btn primary" onclick="openChat()">–ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç</button>
            </div>
        </div>
    </div>

    <!-- Cases Modal -->
    <div class="modal-overlay" id="modal-cases" onclick="closeModal(event, 'cases')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üé∞ –ö–µ–π—Å—ã</div>
                <button class="modal-close" onclick="closeModal(null, 'cases')">√ó</button>
            </div>
            <div id="cases-content">
                <div class="modal-item" onclick="buyCase('homeless')">
                    <div class="modal-item-icon">üì¶</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–ö–µ–π—Å –±–æ–º–∂–∞</div>
                        <div class="modal-item-desc">–ú–æ–Ω–µ—Ç—ã, BC –∏–ª–∏ –∞–≤—Ç–æ</div>
                    </div>
                    <div class="modal-item-price">100 ü™ô</div>
                </div>
                <div class="modal-item" onclick="buyCase('standard')">
                    <div class="modal-item-icon">üì¶</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</div>
                        <div class="modal-item-desc">–®–∞–Ω—Å –Ω–∞ Rolls-Royce</div>
                    </div>
                    <div class="modal-item-price">500 ü™ô</div>
                </div>
                <div class="modal-item" onclick="buyCase('auto')">
                    <div class="modal-item-icon">üöó</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–ê–≤—Ç–æ-–∫–µ–π—Å</div>
                        <div class="modal-item-desc">–¢–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏!</div>
                    </div>
                    <div class="modal-item-price">1000 ü™ô</div>
                </div>
                <div class="modal-item" onclick="buyCase('newyear')">
                    <div class="modal-item-icon">üéÑ</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π</div>
                        <div class="modal-item-desc">–†–µ–¥–∫–∏–π: –ì–ê–ó-69!</div>
                    </div>
                    <div class="modal-item-price">1500 ü™ô</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Referral Modal -->
    <div class="modal-overlay" id="modal-referral" onclick="closeModal(event, 'referral')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üë• –†–µ—Ñ–µ—Ä–∞–ª—ã</div>
                <button class="modal-close" onclick="closeModal(null, 'referral')">√ó</button>
            </div>
            <div class="modal-content">
                <p style="margin-bottom: 16px;">–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π <b>10 –º–æ–Ω–µ—Ç</b> –∑–∞ –∫–∞–∂–¥–æ–≥–æ!</p>
                <div class="ref-link" id="ref-link">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <button class="copy-btn" onclick="copyRefLink()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                <p style="margin-top: 16px; text-align: center;">
                    –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: <b id="ref-count">0</b> –¥—Ä—É–∑–µ–π
                </p>
            </div>
        </div>
    </div>

    <!-- Promo Modal -->
    <div class="modal-overlay" id="modal-promo" onclick="closeModal(event, 'promo')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üéüÔ∏è –ü—Ä–æ–º–æ–∫–æ–¥</div>
                <button class="modal-close" onclick="closeModal(null, 'promo')">√ó</button>
            </div>
            <div class="modal-content">
                <input type="text" class="promo-input" id="promo-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
                <button class="modal-btn primary" onclick="activatePromo()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Donate Modal -->
    <div class="modal-overlay" id="modal-donate" onclick="closeModal(event, 'donate')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üí´ –ú–∞–≥–∞–∑–∏–Ω –∑–∞ –∑–≤—ë–∑–¥—ã</div>
                <button class="modal-close" onclick="closeModal(null, 'donate')">√ó</button>
            </div>
            <div id="donate-content">
                <div class="modal-item">
                    <div class="modal-item-icon">ü™ô</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">100 –º–æ–Ω–µ—Ç</div>
                        <div class="modal-item-desc">–ü–æ–ø–æ–ª–Ω–∏ –±–∞–ª–∞–Ω—Å</div>
                    </div>
                    <div class="modal-item-price">10 ‚≠ê</div>
                </div>
                <div class="modal-item">
                    <div class="modal-item-icon">üíé</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">VIP Platinum</div>
                        <div class="modal-item-desc">7 –¥–Ω–µ–π VIP —Å—Ç–∞—Ç—É—Å–∞</div>
                    </div>
                    <div class="modal-item-price">300 ‚≠ê</div>
                </div>
                <div class="modal-item">
                    <div class="modal-item-icon">üöó</div>
                    <div class="modal-item-info">
                        <div class="modal-item-name">–ê–≤—Ç–æ-–∫–µ–π—Å</div>
                        <div class="modal-item-desc">–¢–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</div>
                    </div>
                    <div class="modal-item-price">100 ‚≠ê</div>
                </div>
                <p style="margin-top: 16px; color: var(--text-secondary); text-align: center;">
                    –î–ª—è –ø–æ–∫—É–ø–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ
                </p>
            </div>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div class="modal-overlay" id="modal-withdraw" onclick="closeModal(event, 'withdraw')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">üí∏ –í—ã–≤–æ–¥ BLACK COIN</div>
                <button class="modal-close" onclick="closeModal(null, 'withdraw')">√ó</button>
            </div>
            <div class="modal-content">
                <p style="margin-bottom: 16px;">
                    –í–∞—à –±–∞–ª–∞–Ω—Å: <b id="withdraw-balance">0</b> BC
                </p>
                <p style="margin-bottom: 16px; color: var(--text-secondary);">
                    –ú–∏–Ω–∏–º—É–º –¥–ª—è –≤—ã–≤–æ–¥–∞: 100 BC<br>
                    –ö—É—Ä—Å: 1 BC = 1 RUB
                </p>
                <button class="modal-btn primary" onclick="requestWithdraw()">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–≤–æ–¥</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // API URL - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à ngrok/localhost.run URL
        const API_URL = 'https://9cb24e103627dd.lhr.life/api';

        // User data
        const user = tg.initDataUnsafe?.user;
        const userId = user?.id;
        let userData = null;

        // Cars data
        const CARS = {
            "zaz_968": { name: "–ó–ê–ó-968", price: 10, emoji: "üöó", tier: "common" },
            "oka": { name: "–û–ö–ê", price: 25, emoji: "üöó", tier: "common" },
            "lada_2107": { name: "Lada 2107", price: 30, emoji: "üöó", tier: "common" },
            "w210": { name: "Mercedes W210", price: 50, emoji: "üöô", tier: "common" },
            "k5": { name: "Kia K5", price: 100, emoji: "üöô", tier: "common" },
            "grand_cherokee": { name: "Grand Cherokee", price: 150, emoji: "üöô", tier: "uncommon" },
            "c90": { name: "Volvo C90", price: 200, emoji: "üöô", tier: "uncommon" },
            "e60": { name: "BMW E60", price: 200, emoji: "üöô", tier: "uncommon" },
            "x5": { name: "BMW X5", price: 250, emoji: "üöô", tier: "uncommon" },
            "m5_f90": { name: "BMW M5 F90", price: 500, emoji: "üèéÔ∏è", tier: "rare" },
            "e63s": { name: "Mercedes E63s", price: 500, emoji: "üèéÔ∏è", tier: "rare" },
            "r8": { name: "Audi R8", price: 1100, emoji: "üèéÔ∏è", tier: "epic" },
            "urus": { name: "Lamborghini Urus", price: 1500, emoji: "üèéÔ∏è", tier: "epic" },
            "cullinan": { name: "Rolls-Royce Cullinan", price: 3000, emoji: "üöô", tier: "legendary" },
            "veyron": { name: "Bugatti Veyron", price: 8000, emoji: "üèéÔ∏è", tier: "legendary" },
            "divo": { name: "Bugatti Divo", price: 10000, emoji: "üèéÔ∏è", tier: "legendary" },
            "gaz_69": { name: "–ì–ê–ó-69", price: 0, emoji: "üöô", tier: "legendary" },
        };

        // Format number
        function formatNum(n) {
            return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }

        // Show toast
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show ' + type;
            setTimeout(() => toast.className = 'toast', 3000);
        }

        // Load user data
        async function loadData() {
            if (!userId) {
                showToast('–û—Ç–∫—Ä–æ–π—Ç–µ –≤ Telegram', 'error');
                return;
            }

            try {
                const response = await fetch(`${API_URL}/user/${userId}`);
                if (response.ok) {
                    userData = await response.json();
                    updateUI();
                }
            } catch (e) {
                console.error('API Error:', e);
                // Use demo data
                userData = {
                    balance: { coins: 1000, black: 100, tickets: 5, crystals: 50 },
                    user: { level: 5 },
                    cars: [],
                    businesses: [],
                    skills: { strength: 1, luck: 1 }
                };
                updateUI();
            }

            document.getElementById('loading').style.display = 'none';
            document.getElementById('app').style.display = 'block';
        }

        // Update UI
        function updateUI() {
            if (!userData) return;

            document.getElementById('coins-display').textContent = formatNum(userData.balance.coins);
            document.getElementById('black-display').textContent = formatNum(userData.balance.black);
            document.getElementById('tickets-display').textContent = userData.balance.tickets;
            document.getElementById('level-display').textContent = userData.user.level;
            document.getElementById('black-balance-text').textContent = `–î–æ—Å—Ç—É–ø–Ω–æ: ${formatNum(userData.balance.black)} BC`;
            document.getElementById('withdraw-balance').textContent = formatNum(userData.balance.black);

            // Referral link
            document.getElementById('ref-link').textContent = `https://t.me/TaynerShopBot?start=ref${userId}`;
        }

        // Modal functions
        function showModal(name) {
            document.getElementById(`modal-${name}`).classList.add('active');
            
            if (name === 'cars') loadCars();
            if (name === 'inventory') loadInventory();
            if (name === 'business') loadBusiness();
        }

        function closeModal(event, name) {
            if (event && event.target !== event.currentTarget) return;
            document.getElementById(`modal-${name}`).classList.remove('active');
        }

        // Load cars
        function loadCars() {
            const container = document.getElementById('cars-content');
            if (!userData?.cars?.length) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">üöó</div><div>–£ –≤–∞—Å –Ω–µ—Ç –º–∞—à–∏–Ω</div></div>';
                return;
            }

            let html = '';
            userData.cars.sort((a, b) => (CARS[b.id]?.price || 0) - (CARS[a.id]?.price || 0));
            
            userData.cars.forEach(car => {
                const info = CARS[car.id] || { name: car.id, emoji: 'üöó', tier: 'common', price: 0 };
                const isLegendary = info.tier === 'legendary';
                html += `
                    <div class="car-card ${isLegendary ? 'legendary' : ''}">
                        <div class="car-emoji">${info.emoji}</div>
                        <div class="car-info">
                            <div class="car-name">${info.name}</div>
                            <div class="car-price">${info.price > 0 ? formatNum(info.price) + ' ü™ô' : 'üèÜ –£–Ω–∏–∫–∞–ª—å–Ω–∞—è'}</div>
                        </div>
                        ${car.count > 1 ? `<div class="car-count">√ó${car.count}</div>` : ''}
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // Load inventory
        function loadInventory() {
            const container = document.getElementById('inventory-content');
            let html = '';
            
            html += `
                <div class="inv-item">
                    <div class="inv-item-icon">üé´</div>
                    <div class="inv-item-info">
                        <div class="inv-item-name">–ë–∏–ª–µ—Ç—ã –±–æ—Å—Å–∞</div>
                        <div class="inv-item-count">${userData?.balance?.tickets || 0} —à—Ç.</div>
                    </div>
                </div>
                <div class="inv-item">
                    <div class="inv-item-icon">üíé</div>
                    <div class="inv-item-info">
                        <div class="inv-item-name">–ö—Ä–∏—Å—Ç–∞–ª–ª—ã</div>
                        <div class="inv-item-count">${userData?.balance?.crystals || 0} —à—Ç.</div>
                    </div>
                </div>
            `;
            
            container.innerHTML = html || '<div class="empty-state"><div class="empty-icon">üì¶</div><div>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div></div>';
        }

        // Load business
        function loadBusiness() {
            const container = document.getElementById('business-content');
            if (!userData?.businesses?.length) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">üè¢</div><div>–£ –≤–∞—Å –Ω–µ—Ç –±–∏–∑–Ω–µ—Å–æ–≤</div></div>';
                return;
            }
            // TODO: render businesses
            container.innerHTML = '<div class="empty-state"><div class="empty-icon">üè¢</div><div>–°–∫–æ—Ä–æ...</div></div>';
        }

        // Actions
        async function claimDaily() {
            try {
                const response = await fetch(`${API_URL}/daily/${userId}`, { method: 'POST' });
                const data = await response.json();
                if (data.success) {
                    showToast(`–ü–æ–ª—É—á–µ–Ω–æ: ${data.reward} –º–æ–Ω–µ—Ç! üéâ`);
                    userData.balance.coins += data.reward;
                    updateUI();
                } else {
                    showToast(data.message || '–ë–æ–Ω—É—Å —É–∂–µ –ø–æ–ª—É—á–µ–Ω', 'error');
                }
            } catch (e) {
                showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /daily –≤ –±–æ—Ç–µ', 'error');
            }
        }

        async function buyItem(item) {
            showToast(`–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ –±–æ—Ç–µ`, 'error');
        }

        async function buyCase(type) {
            showToast(`–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /cases –≤ –±–æ—Ç–µ`, 'error');
        }

        async function activatePromo() {
            const code = document.getElementById('promo-input').value.trim();
            if (!code) {
                showToast('–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥', 'error');
                return;
            }
            try {
                const response = await fetch(`${API_URL}/promo/${userId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ code })
                });
                const data = await response.json();
                if (data.success) {
                    showToast(`–ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! üéâ`);
                    loadData();
                } else {
                    showToast(data.message || '–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥', 'error');
                }
            } catch (e) {
                showToast('–û—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ –±–æ—Ç–µ.', 'error');
            }
        }

        function copyRefLink() {
            const link = document.getElementById('ref-link').textContent;
            navigator.clipboard.writeText(link);
            showToast('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! üìã');
        }

        function requestWithdraw() {
            if (userData.balance.black < 100) {
                showToast('–ú–∏–Ω–∏–º—É–º 500 BC –¥–ª—è –≤—ã–≤–æ–¥–∞', 'error');
                return;
            }
            showToast('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /withdraw –≤ –±–æ—Ç–µ');
        }

        function openChat() {
            tg.openTelegramLink('https://t.me/taynerchat');
        }

        // Init
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
